{% extends "base.html" %}
{% block content %}

<div class="dashboard personnel-dashboard">

  <div class="dashboard-header">
    <h2>Personnel Management</h2>
    <div>
      <a href="/admin" class="btn secondary">Back to Dashboard</a>
    </div>
  </div>

  <div class="card mb-4 animate-fade-in">
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
      <h3>Repair Personnel List</h3>
      <div style="display:flex; gap:12px;">
        <input id="personnelSearchTop" class="search-input" type="search" placeholder="Search personnel..."
          style="width:200px;" />
        <button class="btn sm" onclick="showAddPersonnelForm()">+ Add New</button>
      </div>
    </div>

    <!-- ADD PERSONNEL FORM -->
    <div id="addPersonnelForm"
      style="display:none; background:var(--bg-muted); padding:20px; border-radius:8px; margin-bottom:20px;">
      <h4 style="margin-bottom:15px;">New Personnel Details</h4>
      <div class="grid-2">
        <div class="form-group mb-4">
          <input id="new_personnel_id" placeholder="Personnel ID" />
        </div>
        <div class="form-group mb-4">
          <input id="new_personnel_name" placeholder="Full Name" />
        </div>
        <div class="form-group mb-4">
          <input id="new_personnel_email" placeholder="Email Address" />
        </div>
        <div class="form-group mb-4">
          <input id="new_personnel_contact" placeholder="Contact Number" />
        </div>
        <div class="form-group mb-4">
          <input id="new_personnel_spec" placeholder="Specialization (e.g., Electrician)" />
        </div>
      </div>
      <div style="display:flex; gap:12px; margin-top:10px;">
        <button onclick="submitNewPersonnel()" class="btn">Save Personnel</button>
        <button onclick="hideAddPersonnelForm()" class="btn secondary">Cancel</button>
      </div>
    </div>

    <div id="personnelContainer" class="table-responsive" style="max-height:75vh; overflow:auto;">
      <table id="personnelTable" class="table-compact">
        <thead>
          <tr>
            <th>ID</th>
            <th>Name</th>
            <th>Specialization</th>
            <th>Contact</th>
            <th>Email</th>
            <th>Available</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
      <div id="loadingMore" style="text-align:center; padding:12px; display:none; color:var(--text-muted);">Loading...
      </div>
    </div>
  </div>

</div>

<script src="/static/js/personnel.js"></script>
{% endblock %}