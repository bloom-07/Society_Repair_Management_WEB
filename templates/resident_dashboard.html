{% extends "base.html" %}
{% block content %}

<div class="dashboard">

  <div class="dashboard-header animate-fade-in">
    <div>
      <h2>Resident Dashboard</h2>
      <p class="text-secondary">
        Welcome, <strong>{{ session.user.Resident_Name }}</strong> (ID: {{ session.user.Resident_ID }})
      </p>
    </div>
    <div class="badge badge-assigned" style="font-size:0.9rem; padding:8px 16px;">
      Block: {{ session.user.Block_name or '-' }} | Flat: {{ session.user.Flat_No or '-' }}
    </div>
  </div>

  <div class="grid-2">
    <!-- RAISE REQUEST -->
    <div class="card animate-scale-up">
      <div style="display:flex; align-items:center; gap:10px; margin-bottom:20px;">
        <span style="font-size:1.5rem;">üìù</span>
        <h3>Raise Repair Request</h3>
      </div>
      <div class="form-group">
        <label>Describe the issue</label>
        <textarea id="issue" placeholder="Please describe your issue clearly (e.g., Leaking tap in kitchen)..."
          rows="4"></textarea>
      </div>
      <button class="btn" style="width:100%;" onclick="raiseRequest()">Submit Request</button>
    </div>

    <!-- PERSONNEL (Moved up for better balance) -->
    <div class="card animate-scale-up animate-stagger-1">
      <h3>Available Personnel</h3>
      <div class="table-responsive" style="max-height:300px; overflow-y:auto;">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Specialization</th>
              <th>Available</th>
            </tr>
          </thead>
          <tbody id="personnelTable"></tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- MY REQUESTS -->
  <div class="card mt-4 animate-scale-up animate-stagger-2">
    <h3>My Request History</h3>
    <div class="table-responsive">
      <table>
        <thead>
          <tr>
            <th>Ticket</th>
            <th>Status</th>
            <th>Issue</th>
            <th>Req Date</th>
            <th>Completion Date</th>
            <th>Personnel</th>
          </tr>
        </thead>
        <tbody id="requestTable"></tbody>
      </table>
    </div>
  </div>

</div>

<script src="/static/js/resident.js"></script>
{% endblock %}